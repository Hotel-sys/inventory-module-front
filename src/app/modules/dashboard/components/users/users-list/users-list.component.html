<div class="relative overflow-x-auto">
  <table ubTable>
    <thead ubTableHeader>
      <tr ubTableRow>
        <th ubTableHead>Name</th>
        <th ubTableHead>Email</th>
        <th ubTableHead>Company</th>
        <th ubTableHead>Department</th>
        <th ubTableHead>Actions</th>
      </tr>
    </thead>
    <tbody class="w-full table-auto" ubTableBody>
      @for(user of users; track user.id) {
      <tr ubTableRow>
        <td ubTableCell>
          {{ user.name }}
        </td>
        <td ubTableCell>
          {{ user.email }}
        </td>
        <td ubTableCell>
          {{ user.company?.name ?? '' }}
        </td>
        <td ubTableCell>
          {{ user.department?.name ?? '' }}
        </td>
        <td ubTableCell>
          @if (user) {
          <ubDialogTrigger ubButton size="sm" [ubDialogTrigger]="updateUser" (click)="setSelectedUser(user)">
            >Update</ubDialogTrigger
          >
          }
        </td>
      </tr>

      <ng-template #updateUser>
        <app-users-form [defaultUser]="selectedUser()"></app-users-form>
      </ng-template>
      }
    </tbody>
  </table>
</div>
